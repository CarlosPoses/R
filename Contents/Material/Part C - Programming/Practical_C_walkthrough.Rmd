---
title: "Practical C"
author: "Javier Garcia-Bernardo"
date: "Statistical Programming with R"
output: 
   html_document:
    toc: true
    toc_depth: 5
    toc_float: 
      collapsed: false
      smooth_scroll: false
    number_sections: false
    code_folding: hide
---

# Exercises
In this practical we will go over control flow (if-else statatements and for loops), and functions.

First, create a new notebook for this homework (File -> New File -> R Markdown -> Document)

In the following exercises we will use the same dataset as last time, boys.

You need to download `dataset_boys.csv` from [here](https://javier.science/R/#day-2-nov-26th) and add it to a folder "data" in the same folder as your markdown file.

Then, read the file dataset_boys.csv using the code in the next cell.

```{r class.source = 'fold-show'}
#install.packages(c("readr"),repos = "http://cran.us.r-project.org")
library(readr)

# Reading the file in the background
boys <- readr::read_delim("data/dataset_boys.csv",delim=",")
# Keep only a few columns
boys <- boys[, c("age","wgt","bmi")]
# Drop missing values
boys <- na.omit(boys)
```

---

## Exercise 1-3: Control-flow 


1. **Create a `for`-loop that loops over all numbers between 0 and 10, but only prints numbers below 5. **

```{r}
for (i in 0:10) {
  if (i < 5) {
    print(i)
  }
}
```



2. **Modify the for loop to only print the numbers 3, 4, and 5.**

```{r}
for (i in 0:10) {
  if (i >= 3 & i <= 5) {
    print(i)
  }
}
```
Or, even more efficiently:
```{r}
for (i in 0:10) {
  if (i %in% 3:5) {
    print(i)
  }
}
```


3. **Try to do the same thing without a for-loop, by subsetting a vector from 0 to 10 directly.**

```{r}
num <- 0:10
num[num >= 3 & num <=5]
``` 

---

## Exercise 4--6: Functions

4. **Create a function that calculates the sample standard deviation. Validate it by comparing the output to the function `sd()`** 

$$\sigma = \sqrt{\frac{1}{N-1}\sum_{i=0}^N{(x_i - \bar{x})^2}}$$

```{r}
std_own <- function(values) {
  s <- sqrt(1/(length(values)-1)*sum((values - mean(values))^2))
  return(s)
}

std_own(c(1,2,3,3))
sd(c(1,2,3,3))
```


5. **Use a for loop to apply the function to the columns** `c("age","hgt")` **of the dataset** `boys`. Boys is a tibble (more on this later today), you'll need to use the notation `boys[["age"]]` to extract the vector of values of the column.

```{r}
for (col in c("age","wgt")) {
  print(col)
  print(std_own(boys[[col]]))
}
```

6. **Redo exercise 5 using apply, sapply or lapply**.

```{r}
#Returns vector
apply(boys[, c("age","wgt")], MARGIN=2, FUN=std_own)
#Returns vector
sapply(boys[, c("age","wgt")], FUN=std_own)
#Returns list
lapply(boys[, c("age","wgt")], FUN=std_own)
```


---
